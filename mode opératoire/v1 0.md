# MODE OP√âRATOIRE EXHAUSTIF

## Claude Code + Framework AIAD

### AI-Agent Iterative Development

Guide m√©thodologique complet pour le d√©veloppement logiciel assist√© par agents IA

**Version 1.0 - Janvier 2026**

---

## Table des mati√®res

- [PARTIE 0 : PR√âAMBULE](#partie-0--pr√©ambule)
  - [0.1 Glossaire complet](#01-glossaire-complet)
  - [0.2 Matrice RACI](#02-matrice-raci)
  - [0.3 Vue d'ensemble du processus](#03-vue-densemble-du-processus)
  - [0.4 Configuration des postes par r√¥le](#04-configuration-des-postes-par-r√¥le)
- [PARTIE 1 : PHASE D'INITIALISATION](#partie-1--phase-dinitialisation)
  - [1.1 √âtape : Cadrage initial](#11-√©tape--cadrage-initial)
  - [1.2 √âtape : Cr√©ation du PRD](#12-√©tape--cr√©ation-du-prd)
  - [1.3 √âtape : Architecture technique](#13-√©tape--architecture-technique)
  - [1.4 √âtape : Configuration environnement](#14-√©tape--configuration-environnement)
  - [1.5 √âtape : Cr√©ation de CLAUDE.md](#15-√©tape--cr√©ation-de-claudemd)
  - [1.6 √âtape : Configuration des permissions](#16-√©tape--configuration-des-permissions)
  - [1.7 √âtape : Installation MCP et Plugins](#17-√©tape--installation-mcp-et-plugins)
  - [1.8 √âtape : Configuration des SubAgents](#18-√©tape--configuration-des-subagents)
  - [1.9 Initialisation d'OpenSpec](#19-initialisation-dopenspec)
  - [1.10 Checklist de fin d'initialisation](#110-checklist-de-fin-dinitialisation)
  - [1.11 G√©n√©ration du readme.md](#111-g√©n√©ration-du-readmemd)
- [PARTIE 2 : PHASE DE PLANIFICATION](#partie-2--phase-de-planification)
  - [2.1 Rituel : Planning d'it√©ration](#21-rituel--planning-dit√©ration)
  - [2.2 D√©composition en t√¢ches](#22-d√©composition-en-t√¢ches)
  - [2.3 R√©daction des SPECS](#23-r√©daction-des-specs)
- [PARTIE 3 : PHASE DE D√âVELOPPEMENT](#partie-3--phase-de-d√©veloppement)
  - [3.1 Workflow quotidien](#31-workflow-quotidien)
  - [3.2 Cycle d'une fonctionnalit√©](#32-cycle-dune-fonctionnalit√©)
  - [3.3 Gestion des probl√®mes](#33-gestion-des-probl√®mes)
- [PARTIE 4 : PHASE DE VALIDATION](#partie-4--phase-de-validation)
  - [4.1 Validation QA](#41-validation-qa)
  - [4.2 Validation PO](#42-validation-po)
- [PARTIE 5 : PHASE DE D√âPLOIEMENT](#partie-5--phase-de-d√©ploiement)
  - [5.1 Checklist pr√©-d√©ploiement](#51-checklist-pr√©-d√©ploiement)
  - [5.2 D√©ploiement](#52-d√©ploiement)
- [PARTIE 6 : RITUELS ET AM√âLIORATION](#partie-6--rituels-et-am√©lioration)
  - [6.1 Synchro quotidienne](#61-synchro-quotidienne)
  - [6.2 R√©trospective](#62-r√©trospective)
  - [6.3 R√©trospective IA](#63-r√©trospective-ia)
  - [6.4 M√©triques](#64-m√©triques)
- [PARTIE 7 : ANNEXES](#partie-7--annexes)
  - [7.1 Commandes Claude Code](#71-commandes-claude-code)
  - [7.2 Troubleshooting](#72-troubleshooting)
  - [7.3 Checklist quotidienne PE](#73-checklist-quotidienne-pe)
  - [7.4 FAQ](#74-faq)

---

## PARTIE 0 : PR√âAMBULE

Cette partie introductive fournit toutes les d√©finitions, matrices et vues d'ensemble n√©cessaires pour comprendre et appliquer le mode op√©ratoire.

### 0.1 Glossaire complet

#### 0.1.1 Termes AIAD

| Terme | D√©finition |
|-------|------------|
| AIAD | AI-Agent Iterative Development. Framework m√©thodologique pour le d√©veloppement logiciel assist√© par agents IA. |
| Product Owner (PO) | Gardien de la vision produit. Responsable du PRD et de la validation d'acceptation. |
| Tech Lead | Garant de la coh√©rence technique. Responsable du document ARCHITECTURE. |
| Product Engineer (PE) | R√¥le pivot. Orchestre l'agent IA pour impl√©menter les fonctionnalit√©s. |
| QA Engineer | Garant de la qualit√©. D√©finit la strat√©gie de tests. |
| DevOps Engineer | Assure la fluidit√© du pipeline de livraison. |
| PRD | Product Requirement Document. Capture la vision produit. |
| ARCHITECTURE | Document de r√©f√©rence technique du projet. |
| AGENT-GUIDE | Document de configuration de l'agent IA (CLAUDE.md). |
| SPECS | Sp√©cifications techniques d√©taill√©es pour une t√¢che. |
| It√©ration | Cycle de d√©veloppement court (1-2 semaines). |
| User Story | Description d'une fonctionnalit√© du point de vue utilisateur. |

#### 0.1.2 Termes Claude Code

| Terme | D√©finition |
|-------|------------|
| Claude Code | Agent IA de codage Anthropic qui s'ex√©cute dans le terminal. |
| CLAUDE.md | Fichier de configuration contextuelle de Claude Code. |
| MCP | Model Context Protocol. Permet √† Claude d'acc√©der √† des outils externes. |
| SubAgent | Agent IA sp√©cialis√© invoqu√© pour des t√¢ches sp√©cifiques. |
| Skill | Comp√©tence que Claude active automatiquement selon les besoins. |
| Hook | Commande shell automatique √† un moment pr√©cis du workflow. |
| /clear | Commande pour nettoyer le contexte (recommand√© avant chaque t√¢che). |
| /context | Commande pour afficher l'utilisation du contexte (tokens). |
| /rewind | Commande pour annuler les derni√®res actions de Claude. |
| Plan Mode | Mode de planification (Shift+Tab) pour it√©rer avant impl√©mentation. |

### 0.2 Matrice RACI

La matrice RACI d√©finit qui fait quoi : R (R√©alise), A (Approuve), C (Consult√©), I (Inform√©).

#### 0.2.1 Phase d'Initialisation

| Activit√© | PO | TL | PE | QA | DevOps |
|----------|----|----|----|----|--------|
| Cadrage initial | R/A | C | I | I | I |
| R√©daction PRD | R/A | C | C | I | I |
| Document ARCHITECTURE | I | R/A | C | I | C |
| Setup environnement | I | C | C | I | R/A |
| Cr√©ation CLAUDE.md | I | C | R/A | I | I |

#### 0.2.2 Phase de D√©veloppement

| Activit√© | PO | TL | PE | QA | DevOps |
|----------|----|----|----|----|--------|
| Orchestration agent IA | I | I | R/A | I | I |
| Validation code | I | C | R/A | C | I |
| G√©n√©ration tests | I | I | R | A/C | I |
| Revue de code | I | A | R | C | I |

### 0.3 Vue d'ensemble du processus

Le processus AIAD s'organise en 5 phases principales :

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   PHASE 1    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   PHASE 2    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   PHASE 3    ‚îÇ
‚îÇINITIALISATION‚îÇ     ‚îÇ PLANIFICATION‚îÇ     ‚îÇD√âVELOPPEMENT ‚îÇ
‚îÇ  (3-7 jours) ‚îÇ     ‚îÇ  (2-4 heures)‚îÇ     ‚îÇ(80% it√©ration)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                  ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ   PHASE 5    ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   PHASE 4    ‚îÇ
                     ‚îÇ D√âPLOIEMENT  ‚îÇ     ‚îÇ  VALIDATION  ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### 0.3.1 Chronologie type

| Phase | Dur√©e | Livrables cl√©s |
|-------|-------|----------------|
| Initialisation | 3-7 jours | PRD, ARCHITECTURE, CLAUDE.md |
| Planification | 2-4 heures | Sprint backlog, SPECS |
| D√©veloppement | 80% du sprint | Code, tests |
| Validation | Variable | Rapport QA, acceptation PO |
| D√©ploiement | 0.5-1 jour | Application en production |

### 0.4 Configuration des postes par r√¥le

#### 0.4.1 Product Engineer (r√¥le principal)

| Cat√©gorie | Outil | Utilisation |
|-----------|-------|-------------|
| Terminal | Warp (obligatoire) | Ex√©cution Claude Code |
| IDE | VS Code / Cursor | Visualisation code |
| Claude Code | Installation compl√®te | Orchestration agent IA |
| MCP | Context7, Playwright | Extensions Claude Code |
| Git | GitHub/GitLab | Versioning |

---

## PARTIE 1 : PHASE D'INITIALISATION

La phase d'initialisation pr√©pare les fondations du projet. Cette phase est critique pour le succ√®s des sprints.

> üí° **CONSEIL**
> Investissez le temps n√©cessaire. Une initialisation b√¢cl√©e se paie cher en corrections.

### 1.1 √âtape : Cadrage initial

| | |
|---|---|
| üé≠ **ACTEUR** | Product Owner (avec Tech Lead) |
| üì• **ENTR√âES** | Id√©e de projet, contraintes business |
| üì§ **SORTIES** | Document de cadrage valid√© |
| ‚è±Ô∏è **DUR√âE** | 1-2 jours |

#### 1.1.1 Questions fondamentales

- Quel probl√®me r√©solvons-nous exactement ?
- Pour qui r√©solvons-nous ce probl√®me (persona) ?
- Pourquoi maintenant ? Quelle urgence ?
- Quel est l'impact business attendu ?
- Comment saurons-nous que nous avons r√©ussi ?

#### 1.1.2 Template de cadrage

```markdown
# DOCUMENT DE CADRAGE
## Projet : [Nom du projet]

### 1. CONTEXTE ET VISION
**Probl√®me identifi√© :**
[Description du probl√®me]

**Vision :**
[Vision du produit en 1-2 phrases]

**Persona cible :**
[Description du persona principal]

### 2. OBJECTIFS MESURABLES
| Objectif | M√©trique | Cible |
|----------|----------|-------|
| [Obj 1]  | [M√©trique]| [Valeur] |

### 3. FONCTIONNALIT√âS
**MVP (Must Have) :**
- [Fonctionnalit√© 1]
- [Fonctionnalit√© 2]

**Hors p√©rim√®tre :**
- [√âl√©ment exclu 1]

### 4. CONTRAINTES
Budget : [X ‚Ç¨]
D√©lai : [X semaines]
√âquipe : [Composition]
```

### 1.2 √âtape : Cr√©ation du PRD

| | |
|---|---|
| üé≠ **ACTEUR** | Product Owner |
| üì• **ENTR√âES** | Document de cadrage valid√© |
| üì§ **SORTIES** | PRD.md complet |
| ‚è±Ô∏è **DUR√âE** | 2-4 heures |
| üîó **D√âPENDANCES** | 1.1 Cadrage valid√© |

#### 1.2.1 Prompt pour cr√©er le PRD avec un LLM

```
Je souhaite cr√©er un PRD pour mon projet.

**Contexte :**
[Coller le document de cadrage]

**Format souhait√© :**
1. Contexte et probl√©matique
2. Objectifs mesurables
3. Personas d√©taill√©s
4. User Stories (format: En tant que... je veux... afin de...)
5. Crit√®res d'acceptation pour chaque story
6. Hors p√©rim√®tre
7. Risques et mitigations
8. M√©triques de succ√®s

Pour chaque user story, inclure :
- ID unique (US-001, US-002...)
- Complexit√© (S, M, L)
- Crit√®res d'acceptation testables

Je veux maintenant planifier ce que l'on a d√©fini ensemble en MVP, V1, V2 et hors-p√©rim√®tre. Propose-moi une r√©partition et je te ferai mon retour pour l'adapter.
```

**Consigne :** discuter avec le LLM jusqu'√† obtenir un r√©sultat qui vous convient (les bons √©l√©ments et une planification coh√©rente).

#### 1.2.2 Structure du PRD

G√©n√®re un r√©capitulatif structur√© ainsi :

- **Contexte** d√©crivant Probl√®me et Opportunit√©
- **Objectifs** d√©crivant Objectifs mesurables et m√©triques de succ√®s
- **Personas** d√©crivant les Profils utilisateurs d√©taill√©s
- **User Stories** d√©crivant les Fonctionnalit√©s
- **Hors p√©rim√®tre** d√©crivant Ce qui n'est PAS inclus
- **Risques** d√©crivant Identification des risques et mitigation

```
Puis, peux-tu mettre l'ensemble des √©l√©ments retenus de notre discussion au format Markdown afin d'avoir la version 1.0 du PRD ?

Ainsi je pourrais le copier/coller dans un fichier PRD.md et commencer √† construire l'application avec un Agent IA de Codage.
```

| Section | Contenu | Importance |
|---------|---------|------------|
| Contexte | Probl√®me, opportunit√© | Critique |
| Objectifs | Objectifs mesurables et m√©triques de succ√®s | Critique |
| Personas | Profils utilisateurs d√©taill√©s | √âlev√©e |
| User Stories | Fonctionnalit√©s avec crit√®res | Critique |
| Hors p√©rim√®tre | Ce qui n'est PAS inclus | √âlev√©e |
| Risques | Identification et mitigation | Moyenne |

### 1.3 √âtape : Architecture technique

| | |
|---|---|
| üé≠ **ACTEUR** | Tech Lead |
| üì• **ENTR√âES** | PRD.md valid√© |
| üì§ **SORTIES** | ARCHITECTURE.md complet |
| ‚è±Ô∏è **DUR√âE** | 1-2 jours |
| üîó **D√âPENDANCES** | 1.2 PRD valid√© |

#### 1.3.1 Prompt pour demander des recommandations

Utiliser le "Plan Mode" (shift + tab dans la console Claude Code ou le demander explicitement √† Claude Code) & d√©clencher un mode de reflexion avanc√© ("think" < "think hard" < "think harder" < "ultrathink")

```
Quelle stack technique serait id√©ale pour mon application d√©crite dans @PRD.md ?

Crit√®res :
- √âquipe : [X] Product Engineers
- Budget : [montant]
- Contraintes : [web, mobile, etc.]

Compare les options pour :
- Frontend (framework, styling)
- Backend (framework, langage)
- Base de donn√©es
- H√©bergement

Pour chaque option, indique avantages, inconv√©nients, et compatibilit√© avec les agents IA.

Recommande un choix.

Think hard.
```

#### 1.3.2 Sections de ARCHITECTURE.md

```
Documente l'ensemble des choix techniques dans un fichier ARCHITECTURE.md qui contient les choix retenus et s'il reste certains points √† √©claircir, tu peux me demander. Garde uniquement l'architecture choisie, pas besoin de garder les options √©cart√©es.

Documente les sections suivantes :
- Vue d'ensemble (Description high-level de l'architecture)
- Stack technique (Technologies, versions, justifications)
- Structure du projet (Organisation des dossiers et modules)
- Conventions de code (Nommage, formatage, imports)
- Patterns utilis√©s (Design patterns avec exemples)
- API et interfaces (Contrats, formats)
- Base de donn√©es (Sch√©ma, relations)
- Tests (Frameworks, organisation, couverture)

Pensez √† sortir du mode plan
```

| Section | Contenu |
|---------|---------|
| Vue d'ensemble | Description high-level de l'architecture |
| Stack technique | Technologies, versions, justifications |
| Structure du projet | Organisation des dossiers et modules |
| Conventions de code | Nommage, formatage, imports |
| Patterns utilis√©s | Design patterns avec exemples |
| API et interfaces | Contrats, formats |
| Base de donn√©es | Sch√©ma, relations |
| Tests | Frameworks, organisation, couverture |

### 1.4 √âtape : Configuration environnement

| | |
|---|---|
| üé≠ **ACTEUR** | DevOps / Product Engineer |
| üì• **ENTR√âES** | ARCHITECTURE.md valid√© |
| üì§ **SORTIES** | Environnement op√©rationnel |
| ‚è±Ô∏è **DUR√âE** | 0.5-1 jour |
| üîó **D√âPENDANCES** | 1.3 Architecture valid√©e |

#### 1.4.1 Installation Warp et Claude Code

```bash
# Installation Warp (terminal recommand√©)
# macOS
brew install --cask warp

# Ou t√©l√©charger depuis https://www.warp.dev/

# Installation Claude Code
npm install -g @anthropic-ai/claude-code

# V√©rification
claude --version

# Premi√®re utilisation (authentification)
claude
```

#### 1.4.2 Setup du repository

```bash
# Cr√©ation du projet
mkdir mon-projet && cd mon-projet
git init

# Fichier .gitignore
cat > .gitignore << 'EOF'
node_modules/
.env
.env.local
dist/
.DS_Store
EOF

# Premier commit
git add .
git commit -m "Initial commit"

# Connexion GitHub
gh repo create mon-projet --private --source=. --remote=origin
git push -u origin main
```

<!-- TODO refaire en utilisant Claude Code -->

### 1.5 √âtape : Cr√©ation de CLAUDE.md

| | |
|---|---|
| üé≠ **ACTEUR** | Product Engineer + Tech Lead |
| üì• **ENTR√âES** | PRD, ARCHITECTURE, environnement pr√™t |
| üì§ **SORTIES** | CLAUDE.md op√©rationnel |
| ‚è±Ô∏è **DUR√âE** | 2-4 heures |
| üîó **D√âPENDANCES** | 1.4 Environnement configur√© |

#### 1.5.1 Initialisation

```bash
# Se placer √† la racine du projet
cd mon-projet

# Lancer Claude Code
claude

# Initialiser CLAUDE.md
/init

# Claude pose des questions et g√©n√®re un fichier de base
```

#### 1.5.2 Template CLAUDE.md complet

```markdown
# CLAUDE.md - [Nom du projet]

## üéØ Identit√© du Projet
Ce projet est **[Nom]**, [description courte].
**Domaine m√©tier :** [Domaine]
**Utilisateurs :** [Personas]

## üìö Documentation
- PRD : @docs/PRD.md
- Architecture : @docs/ARCHITECTURE.md

## üõ†Ô∏è Stack Technique
**Frontend :** React 18 + TypeScript + TailwindCSS
**Backend :** Node.js + Express + Prisma
**Database :** PostgreSQL

## ‚úÖ R√àGLES ABSOLUES

### TOUJOURS :
1. TypeScript strict (jamais `any`)
2. Composants fonctionnels (pas de classes)
3. Validation Zod sur toutes les entr√©es
4. Gestion d'erreurs avec try/catch
5. Tests pour chaque nouvelle fonction

### JAMAIS :
1. Pas de `any` en TypeScript
2. Pas de `console.log` en production
3. Pas de secrets dans le code
4. Pas de logique m√©tier dans les composants UI
5. Pas de fonctions > 50 lignes

## üé® Conventions de Code
| Type | Convention | Exemple |
|------|------------|---------|
| Composants | PascalCase.tsx | TaskCard.tsx |
| Hooks | useCamelCase.ts | useAuth.ts |
| Services | camelCase.ts | taskService.ts |

## üìñ Vocabulaire M√©tier
| Terme | D√©finition |
|-------|------------|
| [Terme 1] | [D√©finition] |
```

### 1.6 √âtape : Configuration des permissions

| | |
|---|---|
| üé≠ **ACTEUR** | Product Engineer |
| üì• **ENTR√âES** | Politique de s√©curit√© |
| üì§ **SORTIES** | .claude/settings.local.json |
| ‚è±Ô∏è **DUR√âE** | 30 minutes |
| üîó **D√âPENDANCES** | 1.5 CLAUDE.md cr√©√© |

#### 1.6.1 Fichier de permissions recommand√©

```json
// .claude/settings.local.json
{
  "permissions": {
    "allow": [
      "Read(*)",
      "Write(*)",
      "Edit(*)",
      "Bash(ls:*)",
      "Bash(cat:*)",
      "Bash(mkdir:*)",
      "Bash(npm:*)",
      "Bash(npx:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "WebFetch(domain:*)",
      "Skill(*)"
    ],
    "deny": [
      "Bash(rm -rf:*)",
      "Bash(sudo:*)"
    ]
  }
}
```

### 1.7 √âtape : Installation MCP et Plugins

| | |
|---|---|
| üé≠ **ACTEUR** | Product Engineer |
| üì• **ENTR√âES** | Besoins identifi√©s |
| üì§ **SORTIES** | MCPs op√©rationnels |
| ‚è±Ô∏è **DUR√âE** | 1-2 heures |
| üîó **D√âPENDANCES** | 1.6 Permissions configur√©es |

#### 1.7.1 MCPs recommand√©s

| MCP | Usage | Installation dans warp |
|-----|-------|------------------------|
| Context7 | Documentation √† jour | `claude mcp add context7 -- npx -y @upstash/context7-mcp` |
| Playwright | Contr√¥le navigateur | `claude mcp add playwright npx @playwright/mcp@latest` |

Dans Claude Code, afficher les MCP install√©s :

```
/mcp
```

Puis :

```
Ajoute context7 et playwright dans la config du projet
```

### 1.8 √âtape : Configuration des SubAgents

| | |
|---|---|
| üé≠ **ACTEUR** | Tech Lead + Product Engineer |
| üì• **ENTR√âES** | Besoins en expertise |
| üì§ **SORTIES** | SubAgents dans .claude/agents/ |
| ‚è±Ô∏è **DUR√âE** | 2-4 heures |
| üîó **D√âPENDANCES** | 1.7 MCPs install√©s |

#### 1.8.1 Cr√©ation de SubAgents

```bash
# Dans Claude Code
/agents

# Les agents sont stock√©s dans :
# - ~/.claude/agents/     (global)
# - .claude/agents/       (local au projet)
```

#### 1.8.2 SubAgent : Code Reviewer

```markdown
# .claude/agents/code-reviewer.md

# Code Reviewer Agent

## R√¥le
Expert en revue de code. Analyse et feedback constructif.

## Instructions
Quand tu re√ßois du code √† reviewer :
1. Analyse structurelle (architecture, patterns)
2. Qualit√© (lisibilit√©, DRY)
3. S√©curit√© (validation, erreurs)
4. Performance (N+1, m√©moisation)
5. Tests (couverture, cas limites)

## Format de sortie
### ‚úÖ Points positifs
### ‚ö†Ô∏è Suggestions
### ‚ùå √Ä corriger
### üìä Score /10
```

#### 1.8.3 SubAgent : Test Writer

```markdown
# .claude/agents/test-writer.md

# Test Writer Agent

## R√¥le
Expert en √©criture de tests.

## Instructions
1. Identifier cas nominal, limites, erreurs
2. Framework : Vitest (frontend), Jest (backend)
3. Pattern : Arrange-Act-Assert
4. Messages descriptifs

## Format
```typescript
describe('Module', () => {
  describe('fonction', () => {
    it('should [comportement] when [condition]', () => {
      // Arrange - Act - Assert
    });
  });
});
```
```

<!-- TODO Ajout : https://github.com/Fission-AI/OpenSpec/ -->
<!-- TODO Ajout : frontend-design de anthropic/claude-plugins-official -->
<!-- TODO Ajout : playwright-skill de playwright-skill@playwright-skill -->

### 1.9 Initialisation d'OpenSpec

Dans warp :

```bash
openspec init
```

R√©pondre aux diff√©rentes questions pour choisir Claude Code.

Cr√©er le contexte projet d'OpenSpec.

### 1.9 Configuration dans CLAUDE.md

```
Ajoute ces informations dans mon @CLAUDE.md ne retouche pas √† l'existant dans le fichier.

Aper√ßu de l'objectif du projet

Aper√ßu de l'architecture globale

Style visuel :
- Interface claire et minimaliste
- Pas de mode sombre pour le MVP

Contraintes et Politiques :
- NE JAMAIS exposer les cl√©s API au client

D√©pendances :
- Pr√©f√©rer les composants existants plut√¥t que d'ajouter de nouvelles biblioth√®ques UI

√Ä la fin de chaque d√©veloppement qui implique l'interface graphique :
- Tester avec playwright-skill, l'interface doit √™tre responsive, fonctionnel et r√©pondre au besoin d√©velopp√©

Documentation :
- Ajoute une section documentation avec les liens vers @PRD.md & @ARCHITECTURE.md

Context7 :
Utilise toujours context7 lorsque j'ai besoin de g√©n√©ration de code, d'√©tapes de configuration ou d'installation, ou de documentation de biblioth√®que/API. Cela signifie que tu dois automatiquement utiliser les outils MCP Context7 pour r√©soudre l'identifiant de biblioth√®que et obtenir la documentation de biblioth√®que sans que j'aie √† le demander explicitement.

Note : Toutes les sp√©cifications doivent √™tre r√©dig√©es en fran√ßais, y compris les specs OpenSpec (sections Purpose et Scenarios). Seuls les titres de Requirements doivent rester en anglais avec les mots-cl√©s SHALL/MUST pour la validation OpenSpec.
```

### 1.10 Checklist de fin d'initialisation

| ‚úì | √âl√©ment | V√©rification |
|---|---------|--------------|
| ‚òê | Document de cadrage | Valid√© par stakeholders |
| ‚òê | PRD.md | Complet avec user stories |
| ‚òê | ARCHITECTURE.md | Stack et conventions d√©finis |
| ‚òê | CLAUDE.md | R√®gles et contexte document√©s |
| ‚òê | Environnement | Node, Git, Claude Code install√©s |
| ‚òê | Permissions | .claude/settings.local.json configur√© |
| ‚òê | MCPs | Context7, Playwright install√©s |
| ‚òê | SubAgents | code-reviewer, test-writer cr√©√©s |
| ‚òê | Repository | Git initialis√©, remote configur√© |
| ‚òê | CI/CD | Pipeline de base en place |

> ‚ö†Ô∏è **ATTENTION**
> Ne d√©marrez pas le d√©veloppement tant que tous les √©l√©ments ne sont pas valid√©s.

<!-- TODO Ajout dans la checklist : https://github.com/Fission-AI/OpenSpec/ -->
<!-- TODO Ajout dans la checklist : frontend-design de anthropic/claude-plugins-official -->
<!-- TODO Ajout dans la checklist : playwright-skill de playwright-skill@playwright-skill -->

### 1.11 G√©n√©ration du readme.md

```
G√©n√®re le readme.md √† partir des √©l√©ments contenus dans PRD.md, ARCHITECTURE.md et CLAUDE.md
```

---

## PARTIE 2 : PHASE DE PLANIFICATION

La planification transforme les user stories en t√¢ches concr√®tes pr√™tes pour l'agent IA.

### 2.1 Rituel : Planning d'it√©ration

| | |
|---|---|
| üé≠ **ACTEUR** | PO + PE + TL |
| üì• **ENTR√âES** | PRD.md, Product Backlog |
| üì§ **SORTIES** | Sprint backlog, Stories s√©lectionn√©es |
| ‚è±Ô∏è **DUR√âE** | 2-4 heures |
| üîó **D√âPENDANCES** | Phase 1 compl√®te |

#### 2.1.1 Ordre du jour

| Dur√©e | Activit√© | Participants |
|-------|----------|--------------|
| 15 min | Rappel des objectifs | Tous |
| 30 min | Pr√©sentation des stories candidates | PO |
| 45 min | Clarification et questions | Tous |
| 30 min | Estimation (T-shirt sizing) | PE + TL |
| 30 min | S√©lection selon capacit√© | Tous |
| 10 min | Engagement de l'√©quipe | Tous |

#### 2.1.2 Estimation T-shirt

| Taille | Complexit√© | Dur√©e |
|--------|------------|-------|
| XS | Tr√®s simple | < 2h |
| S | Simple | 2-4h |
| M | Moyenne | 4-8h (1 jour) |
| L | Complexe | 2-3 jours |
| XL | Tr√®s complexe | √Ä red√©couper |

> üí° **CONSEIL**
> Une story XL doit toujours √™tre red√©coup√©e en stories plus petites.

### 2.2 D√©composition en t√¢ches

| | |
|---|---|
| üé≠ **ACTEUR** | Product Engineer |
| üì• **ENTR√âES** | User Stories s√©lectionn√©es |
| üì§ **SORTIES** | T√¢ches atomiques |
| ‚è±Ô∏è **DUR√âE** | 1-2h par story |
| üîó **D√âPENDANCES** | 2.1 Planning termin√© |

#### 2.2.1 Crit√®res d'atomicit√©

- R√©alisable en moins de 4 heures
- Objectif unique et clair
- Testable ind√©pendamment
- D√©crite en 1-2 phrases

#### 2.2.2 Exemple de d√©composition

```markdown
# User Story : US-001 - Cr√©ation de t√¢che

## D√©composition

### Backend
| ID | T√¢che | Dur√©e |
|----|-------|-------|
| T-001-1 | Cr√©er sch√©ma Prisma Task | 1h |
| T-001-2 | Cr√©er route POST /api/tasks | 2h |
| T-001-3 | Cr√©er validateur Zod | 1h |
| T-001-4 | Tests unitaires taskService | 2h |

### Frontend
| ID | T√¢che | Dur√©e |
|----|-------|-------|
| T-001-5 | Cr√©er composant TaskForm | 2h |
| T-001-6 | Cr√©er hook useCreateTask | 1h |
| T-001-7 | Int√©grer dans page Tasks | 1h |
| T-001-8 | Tests composant TaskForm | 2h |
```

### 2.3 R√©daction des SPECS

| | |
|---|---|
| üé≠ **ACTEUR** | Product Engineer |
| üì• **ENTR√âES** | T√¢che atomique, PRD, ARCHITECTURE |
| üì§ **SORTIES** | Fichier SPEC complet |
| ‚è±Ô∏è **DUR√âE** | 30-60 min par SPEC |
| üîó **D√âPENDANCES** | 2.2 T√¢ches d√©compos√©es |

#### 2.3.1 Template SPEC

```markdown
# SPEC : T-001-2 - Cr√©er route POST /api/tasks

## üìã R√©f√©rence
- User Story : US-001
- PRD : @docs/PRD.md#us-001

## üéØ Objectif
Cr√©er l'endpoint API POST /api/tasks pour cr√©er une t√¢che.

## üìÅ Fichiers impact√©s
### √Ä cr√©er
- apps/api/src/routes/task-routes.ts
- apps/api/src/controllers/taskController.ts
- apps/api/src/services/taskService.ts

### √Ä modifier
- apps/api/src/index.ts

## üìê Interface

### Request
```typescript
// POST /api/v1/tasks
interface CreateTaskRequest {
  title: string;        // 1-200 chars
  description?: string; // max 2000 chars
  deadline?: string;    // ISO 8601
}
```

### Response (201)
```typescript
interface CreateTaskResponse {
  data: {
    id: string;
    title: string;
    status: 'TODO';
    createdAt: string;
  }
}
```

## üî≤ Cas limites
| Cas | Comportement |
|-----|--------------|
| Titre vide | 400 VALIDATION_ERROR |
| Titre > 200 chars | 400 VALIDATION_ERROR |

## üß™ Tests attendus
```typescript
describe('TaskService', () => {
  it('should create task with minimal data');
  it('should throw if title empty');
});
```
```

#### 2.3.2 Checklist qualit√© SPEC

| ‚úì | Crit√®re |
|---|---------|
| ‚òê | Objectif unique et clair |
| ‚òê | Fichiers √† cr√©er/modifier list√©s |
| ‚òê | Interfaces TypeScript d√©finies |
| ‚òê | Cas d'erreur document√©s |
| ‚òê | Tests attendus sp√©cifi√©s |
| ‚òê | Exemple entr√©e/sortie fourni |

---

## PARTIE 3 : PHASE DE D√âVELOPPEMENT

Le Product Engineer orchestre l'agent IA pour impl√©menter les SPECS, une fonctionnalit√© √† la fois.

### 3.1 Workflow quotidien

| Heure | Activit√© | Dur√©e |
|-------|----------|-------|
| 9h00 | Synchro √©quipe | 15 min |
| 9h15 | Revue contexte (PRD, ARCHITECTURE) | 15 min |
| 9h30 | Pr√©paration premi√®re SPEC | 45 min |
| 10h30 | Session Claude Code - T√¢che 1 | 90 min |
| 12h00 | Validation et tests | 30 min |
| 14h00 | Session Claude Code - T√¢che 2 | 90 min |
| 15h30 | Revue de code | 30 min |
| 16h00 | Mise √† jour CLAUDE.md | 15 min |
| 16h15 | Git commit/push | 15 min |

### 3.2 Cycle d'une fonctionnalit√©

#### 3.2.1 √âtape 1 : Lancement

```bash
# 1. TOUJOURS nettoyer le contexte
/clear

# 2. V√©rifier l'espace disponible
/context

# 3. Prompt structur√©
Impl√©mente la fonctionnalit√© :

**SPEC** : @docs/specs/T-001-2-route-post-tasks.md
**Contexte** : @CLAUDE.md
**Architecture** : @docs/ARCHITECTURE.md

Instructions :
1. Lis la SPEC en entier
2. Cr√©e les fichiers dans l'ordre indiqu√©
3. G√®re tous les cas d'erreur
4. N'ajoute PAS de fonctionnalit√©s non sp√©cifi√©es

Montre ton plan avant de coder.
```

#### 3.2.2 √âtape 2 : Validation

```markdown
# Checklist validation
‚òê Le code compile (npm run build)
‚òê Les fichiers sont au bon endroit
‚òê Les imports sont corrects
‚òê Le linting passe (npm run lint)
‚òê La logique correspond √† la SPEC

# Si probl√®mes, demander une revue
Revois le code avec l'agent code-reviewer :
@apps/api/src/services/taskService.ts
```

#### 3.2.3 √âtape 3 : Correction

```
# Prompt de correction
J'ai identifi√© ces probl√®mes :
1. [Probl√®me 1]
2. [Probl√®me 2]

Corrige en respectant la SPEC @docs/specs/T-001-2.md

# Si trop de probl√®mes
/rewind

# Limite : 3 it√©rations max
# Si toujours bloqu√© : revoir la SPEC ou escalader
```

#### 3.2.4 √âtape 4 : Tests

```bash
# G√©n√©ration des tests
G√©n√®re les tests pour @apps/api/src/services/taskService.ts
selon les sc√©narios de @docs/specs/T-001-2.md

Utilise Jest et les conventions de @CLAUDE.md

# Ex√©cution
npm run test

# Couverture
npm run test:coverage
# Cible : > 80% backend, > 70% frontend
```

#### 3.2.5 √âtape 5 : Revue

```
# Revue automatique
Revue de code avec l'agent code-reviewer :
@apps/api/src/services/taskService.ts
@apps/api/src/__tests__/taskService.test.ts

# Impliquer Tech Lead si :
# - Changement d'architecture
# - Nouvelle d√©pendance
# - Code complexe (> 200 lignes)
```

#### 3.2.6 √âtape 6 : Documentation

```
# Mise √† jour documentation
Mets √† jour la doc pour la nouvelle fonctionnalit√© :
1. Ajoute l'endpoint dans @docs/API.md
2. Documente les fonctions complexes avec JSDoc
```

#### 3.2.7 √âtape 7 : Merge

```bash
# Commandes Git
git status
git add .
git commit -m "feat(api): add POST /api/tasks endpoint

- Create task with title, description, deadline
- Add validation and error handling
- Add unit tests

Closes #123"

git push origin feature/create-task

# Nettoyage pour la prochaine t√¢che
/clear
```

### 3.3 Gestion des probl√®mes

| Probl√®me | Cause | Solution |
|----------|-------|----------|
| Code hors sujet | SPEC ambigu√´ | Reformuler avec exemples |
| Boucle infinie | T√¢che trop complexe | D√©couper davantage |
| Erreurs TypeScript | Types manquants | Demander de typer |
| Tests √©chouent | Mock incorrect | V√©rifier les mocks |

> ‚ö†Ô∏è **ATTENTION**
> Si vous corrigez la m√™me erreur plusieurs fois, ajoutez une r√®gle dans CLAUDE.md.

---

## PARTIE 4 : PHASE DE VALIDATION

La validation assure que le code r√©pond aux exigences du PRD et aux standards de qualit√©.

### 4.1 Validation QA

| | |
|---|---|
| üé≠ **ACTEUR** | QA Engineer |
| üì• **ENTR√âES** | Code merg√©, crit√®res d'acceptation |
| üì§ **SORTIES** | Rapport de validation |
| ‚è±Ô∏è **DUR√âE** | Variable |
| üîó **D√âPENDANCES** | Code merg√© |

| Type de test | Objectif | Automatisation |
|--------------|----------|----------------|
| Fonctionnel | V√©rifier crit√®res d'acceptation | 70% |
| R√©gression | Rien n'est cass√© | 100% |
| Exploratoire | Trouver bugs non anticip√©s | 0% |

#### 4.1.1 Template rapport

```markdown
# Rapport de Validation - US-001

## R√©sum√©
| Crit√®re | Statut |
|---------|--------|
| AC-001-1 | ‚úÖ Valid√© |
| AC-001-2 | ‚úÖ Valid√© |
| AC-001-3 | ‚ö†Ô∏è Mineur |

## Bugs
| ID | S√©v√©rit√© | Description |
|----|----------|-------------|
| BUG-042 | Mineur | [Description] |

## Conclusion
**VALID√â avec r√©serves**
```

### 4.2 Validation PO

| | |
|---|---|
| üé≠ **ACTEUR** | Product Owner |
| üì• **ENTR√âES** | Validation QA OK |
| üì§ **SORTIES** | Acceptation ou refus |
| ‚è±Ô∏è **DUR√âE** | 30 min - 1h |
| üîó **D√âPENDANCES** | Validation QA |

1. PE pr√©pare l'environnement de d√©mo
2. PE pr√©sente la fonctionnalit√©
3. PO v√©rifie chaque crit√®re d'acceptation
4. PO teste lui-m√™me
5. PO donne son verdict

---

## PARTIE 5 : PHASE DE D√âPLOIEMENT

Le d√©ploiement livre le code valid√© en production de mani√®re contr√¥l√©e.

### 5.1 Checklist pr√©-d√©ploiement

| ‚úì | V√©rification | Commande |
|---|--------------|----------|
| ‚òê | Tests passent | `npm run test` |
| ‚òê | Build r√©ussi | `npm run build` |
| ‚òê | Variables d'env configur√©es | V√©rifier .env.production |
| ‚òê | Migrations pr√™tes | `npx prisma migrate status` |
| ‚òê | Rollback document√© | Proc√©dure en place |

### 5.2 D√©ploiement

```bash
# Staging
git tag -a v1.0.0-rc1 -m "Release candidate 1"
git push origin v1.0.0-rc1
railway up --environment staging

# V√©rification
curl https://staging.app.com/health

# Production (apr√®s validation staging)
railway up --environment production
curl https://app.com/health

# Rollback si probl√®me
railway rollback --environment production
```

---

## PARTIE 6 : RITUELS ET AM√âLIORATION

### 6.1 Synchro quotidienne

| √âl√©ment | D√©tail |
|---------|--------|
| Dur√©e | 15 minutes max |
| Fr√©quence | Quotidienne (9h00) |
| Questions | Qu'ai-je fait ? Que vais-je faire ? Blocages ? |
| Questions IA | L'agent a-t-il eu des difficult√©s ? CLAUDE.md mis √† jour ? |

### 6.2 R√©trospective

| Cat√©gorie | Question |
|-----------|----------|
| START | Qu'est-ce qu'on devrait commencer ? |
| STOP | Qu'est-ce qu'on devrait arr√™ter ? |
| CONTINUE | Qu'est-ce qu'on devrait continuer ? |

### 6.3 R√©trospective IA

- Quels prompts ont bien fonctionn√© ?
- Quelles erreurs r√©currentes documenter ?
- Le CLAUDE.md est-il √† jour ?
- Les SubAgents sont-ils efficaces ?
- Comment am√©liorer les SPECS ?

### 6.4 M√©triques

| M√©trique | Cible |
|----------|-------|
| V√©locit√© | Stable ou croissante |
| First-time success | > 70% |
| Couverture tests | > 80% |
| Bugs production | Tendance d√©croissante |

---

## PARTIE 7 : ANNEXES

### 7.1 Commandes Claude Code

| Commande | Description |
|----------|-------------|
| /clear | Nettoie le contexte (avant chaque t√¢che) |
| /context | Affiche l'utilisation du contexte |
| /rewind | Annule les derni√®res actions |
| /model | Change de mod√®le (Haiku, Sonnet, Opus) |
| /init | Initialise CLAUDE.md |
| /agents | G√®re les SubAgents |
| Esc | Interrompt Claude |
| Shift+Tab | Change le mode d'acceptation |

### 7.2 Troubleshooting

| Probl√®me | Solution |
|----------|----------|
| Claude ne r√©pond pas | /clear puis r√©essayer |
| Code hors sujet | Reformuler SPEC avec exemples |
| MCP ne fonctionne pas | `claude mcp list` pour v√©rifier |
| SubAgent pas trouv√© | V√©rifier .claude/agents/ |

### 7.3 Checklist quotidienne PE

| ‚úì | Activit√© |
|---|----------|
| ‚òê | Participer √† la synchro |
| ‚òê | /clear avant premi√®re t√¢che |
| ‚òê | Lire SPEC avant de prompter |
| ‚òê | Valider code g√©n√©r√© |
| ‚òê | Ex√©cuter les tests |
| ‚òê | Mettre √† jour CLAUDE.md |
| ‚òê | Commit et push |

### 7.4 FAQ

| Question | R√©ponse |
|----------|---------|
| AIAD remplace les d√©veloppeurs ? | Non, il transforme leur r√¥le en orchestrateur. |
| Faut-il tout adopter ? | Non, commencez par les artefacts, puis les rituels. |
| R√©sultats en combien de temps ? | 2-4 semaines pour les premiers gains. |
| Taille d'√©quipe minimum ? | 2-3 personnes (r√¥les combinables). |

---

**‚Äî Fin du Mode Op√©ratoire ‚Äî**

*Version 1.0 - Janvier 2026*
